var eomCartUtils={userCart:{},orderFlow:{}};(function(){var judgeNowInScSite=function judgeNowInScSite(){return typeof lmd_c!=="undefined"&&typeof lmd!=="undefined"&&lmd.bu==="Service Connect"};var calcHttpRequestUrlPrefix=function calcHttpRequestUrlPrefix(){return judgeNowInScSite()?lmd_c.pcSupportOrigin.replace(/\/[a-zA-Z]{2}\/[a-zA-Z]{2}$/,""):""};var httpRequest=function httpRequest(method,uri,param,callback){originHttpRequest(method,uri,param,callback,"/eomCart")};var getUriWithParam=function getUriWithParam(uri,param){if(!uri||!param){return uri}uri+=uri.indexOf("?")>0?"&":"?";for(var key in param){if(param[key]){uri+=key+"="+encodeURIComponent(param[key])+"&"}}uri=uri.substring(0,uri.length-1);return uri};var originHttpRequest=function originHttpRequest(method,uri,param,callback,path){var url=calcHttpRequestUrlPrefix()+l.UrlUtility.getFullServicesPathV4(path+uri);if(method=="GET"&&param){url=getUriWithParam(url,param)}var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){if(this.readyState==4){var ret=null;if(this.status==200&&this.responseText){try{ret=JSON.parse(this.responseText)}catch(e){console.error(e)}}if(ret){callback(ret)}else{callback({code:100,msg:{desc:"Failed",value:"status: "+this.status},data:null})}}};xhttp.open(method,url,true);if(judgeNowInScSite()){xhttp.withCredentials=true}if((l.UrlUtility.getUrlParam("subSource")||"").toLowerCase()!=="smoketest"&&!Cookies.get("eservice_footprints_is_smoketest")&&Cookies.get("eservice_footprints_sessionID")){xhttp.setRequestHeader("footprintsSessionID",Cookies.get("eservice_footprints_sessionID"))}if(Cookies.get("eomCurrentOrderNumber")){xhttp.setRequestHeader("lastEomOrderNumber",Cookies.get("eomCurrentOrderNumber"))}if(method=="POST"){xhttp.setRequestHeader("content-type","application/json;charset=UTF-8")}if(method=="POST"&&param){xhttp.send(JSON.stringify(param))}else{xhttp.send()}};var callHttp=function callHttp(method,uri,param){return new Promise(function(resolve,reject){httpRequest(method,uri,param,function(ret){if(ret.code==0){resolve(ret.data)}else{reject(ret)}})})};eomCartUtils.isSupportSale=function(channel,productType){if(eomCartUtils.userCart.fot=="true"||l.UrlUtility.getUrlParam("redportfot")=="true"){return true}if(window.config&&!window.config.supportSales){if(productType){return false}return true}var config=window.config?window.config.shopConfigs:undefined;if(config===undefined){if(productType){return false}return true}if(config==null){return false}if(!productType){return true}if(!config.channels||config.channels.length==0){return false}for(var i in config.channels){var channelItem=config.channels[i];if(channelItem.channel.toLowerCase()!=channel.toLowerCase()){continue}if(!productType){return true}if(!channelItem.productTypes||channelItem.productTypes.length==0){return false}for(var j in channelItem.productTypes){if(channelItem.productTypes[j].toLowerCase()==productType.toLowerCase()){return true}}}return false};eomCartUtils.userCart.isSupportSale=function(productType){return eomCartUtils.isSupportSale(eomCartUtils.userCart.channel,productType)};eomCartUtils.userCart.setProperty=function(name,value,defaultValue){if(!name)return;if(!value){value=sessionStorage.getItem("eomUserCartProperties_"+name)}if(!value&&defaultValue){value=defaultValue}eomCartUtils.userCart[name]=value;if(value){sessionStorage.setItem("eomUserCartProperties_"+name,value)}};eomCartUtils.userCart.removeProperty=function(name){if(!name)return;sessionStorage.removeItem("eomUserCartProperties_"+name);delete eomCartUtils.userCart[name]};eomCartUtils.userCart.get=function(channel,fromPrimaryDB,recoveryLast,orderNumber,accessToken){var uri=getUriWithParam("/user/get",{partFot:eomCartUtils.userCart.partFot});var result=callHttp("POST",uri,{channel:channel||eomCartUtils.userCart.channel,fromPrimaryDB:fromPrimaryDB||false,recoveryLast:recoveryLast||false,orderNumber:orderNumber||null,token:accessToken||null});return handleCartData(result)};eomCartUtils.userCart.checkIncomplete=function(channel){var uri=getUriWithParam("/user/checkIncomplete",{partFot:eomCartUtils.userCart.partFot});return callHttp("POST",uri,{channel:channel||eomCartUtils.userCart.channel})};var handleCartData=function handleCartData(promise){return new Promise(function(resolve,reject){promise.then(function(data){if(data&&data.orderNumber){try{Cookies.set("eomCurrentOrderNumber",data.orderNumber,{domain:".lenovo.com"})}catch(e){}}resolve(data);eomCartUtils.userCart.cartUpdatedCallBack&&eomCartUtils.userCart.cartUpdatedCallBack({cart:data})}).catch(function(ret){reject(ret)})})};var handleUrlCoupon=function handleUrlCoupon(promise){return new Promise(function(resolve,reject){promise.then(function(data){if(data&&data.couponNumber){if(eomCartUtils.userCart.urlCoupon){var url=location.href.replace(new RegExp("([?&]coupon=)[^?&#]*","i"),"$1"+data.couponNumber);window.history.replaceState(null,"",url);eomCartUtils.userCart.setProperty("urlCoupon",data.couponNumber)}eomCartUtils.userCart.setProperty("cartCoupon",data.couponNumber)}else{var url1=location.href.replace(new RegExp("([?&])coupon=[^?&#]*(&|#|$)","i"),function(s0,s1,s2){return s2==="&"?s1:""});window.history.replaceState(null,"",url1);eomCartUtils.userCart.removeProperty("urlCoupon");eomCartUtils.userCart.removeProperty("cartCoupon")}resolve(data)}).catch(function(ret){reject(ret)})})};var warpPromise=function warpPromise(promise,success,failed){return new Promise(function(resolve,reject){promise.then(function(data){success&&success(data);resolve(data)}).catch(function(ret){failed&&failed(ret);reject(ret)})})};var footprintsTrace=function footprintsTrace(value,tags){try{footprints&&footprints.trace&&footprints.trace(value,tags)}catch(e){};};var mobileRE=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var chromeOSRE=/ cros /i;var windowsARMRE=/windows.*arm/i;eomCartUtils.userCart.updateSubSource=function(subSource,channel){var uri="/user/updateSubSource";return callHttp("POST",uri,{subSource:subSource||eomCartUtils.userCart.subSource,channel:channel||eomCartUtils.userCart.channel})};eomCartUtils.userCart.add=function(data){eomCartUtils.userCart.setProperty("source",data.source);eomCartUtils.userCart.setProperty("subSource",data.subSource);eomCartUtils.userCart.setProperty("cid",data.cid);var client="";if(mobileRE.test(navigator.userAgent)){client="Mobile"}else if(chromeOSRE.test(navigator.userAgent)){client="Chrome OS"}else if(windowsARMRE.test(navigator.userAgent)){client="Windows ARM"}data=Object.assign({channel:eomCartUtils.userCart.channel,cid:eomCartUtils.userCart.cid,source:eomCartUtils.userCart.source,subSource:eomCartUtils.userCart.subSource,posaId:eomCartUtils.userCart.posaId,client:client,qmReplay:window["QuantumMetricAPI"]?window["QuantumMetricAPI"].getReplay():""},data,{lenaInfo:Object.assign({},{lenaData:eomCartUtils.userCart.lenaData,callbackLenaVersion:eomCartUtils.userCart.callbackLenaVersion},data.lenaInfo)});if(data&&data.entries){data.entries.forEach(function(x){if(eomCartUtils.userCart.mls&&!x.mls){x.mls=eomCartUtils.userCart.mls}})}var uri="/user/add";uri=getUriWithParam(uri,{partFot:eomCartUtils.userCart.partFot,flashFot:eomCartUtils.userCart.flashFot,fot:eomCartUtils.userCart.fot});var result=callHttp("POST",uri,data);result=handleCartData(result);return warpPromise(result,function(data){footprintsTrace("",["CART_ADD","CART_ADD_SUCCESS"])},function(ret){footprintsTrace({error:ret?ret.msg:""},["CART_ADD","CART_ADD_FAILED"])})};eomCartUtils.userCart.addMulti=function(data){data=Object.assign({channel:eomCartUtils.userCart.channel,cid:eomCartUtils.userCart.cid,subSource:eomCartUtils.userCart.subSource,source:eomCartUtils.userCart.source,qmReplay:window["QuantumMetricAPI"]?window["QuantumMetricAPI"].getReplay():""},data);var uri="/user/addMulti";uri=getUriWithParam(uri,{partFot:eomCartUtils.userCart.partFot,fot:eomCartUtils.userCart.fot});var result=callHttp("POST",uri,data);result=handleCartData(result);return warpPromise(result,function(data){footprintsTrace("",["CART_ADD","CART_ADD_SUCCESS"])},function(ret){footprintsTrace({error:ret?ret.msg:""},["CART_ADD","CART_ADD_FAILED"])})};eomCartUtils.userCart.update=function(data){data=Object.assign({channel:eomCartUtils.userCart.channel},data);var uri="/user/update";uri=getUriWithParam(uri,{partFot:eomCartUtils.userCart.partFot,flashFot:eomCartUtils.userCart.flashFot});var result=callHttp("POST",uri,data);return handleCartData(result)};eomCartUtils.userCart.delete=function(data){var uri="/user/delete";uri=getUriWithParam(uri,{partFot:eomCartUtils.userCart.partFot});data=Object.assign({channel:eomCartUtils.userCart.channel},data);var result=callHttp("POST",uri,data);return handleCartData(result)};eomCartUtils.userCart.clear=function(channel){var uri="/user/clear";uri=getUriWithParam(uri,{partFot:eomCartUtils.userCart.partFot});var result=callHttp("POST",uri,{channel:channel||eomCartUtils.userCart.channel});return handleCartData(result)};eomCartUtils.userCart.applyCoupon=function(couponNumber,channel){if(couponNumber&&!/^[A-Za-z0-9_-]+$/.test(couponNumber.trim())){return new Promise(function(resolve,reject){reject({code:-101,msg:{desc:"Only contains letter, digit, '_' and '-'",value:null},data:null})})}var uri="/user/applyCoupon";uri=getUriWithParam(uri,{partFot:eomCartUtils.userCart.partFot,fot:eomCartUtils.userCart.fot});var data={couponNumber:couponNumber,channel:channel||eomCartUtils.userCart.channel,source:eomCartUtils.userCart.source,subSource:eomCartUtils.userCart.subSource,cid:eomCartUtils.userCart.cid};if(eomCartUtils.userCart.posaId){data.posaId=eomCartUtils.userCart.posaId}var result=callHttp("POST",uri,data);result=handleCartData(result);result=handleUrlCoupon(result);return warpPromise(result,function(data){footprintsTrace({coupon:couponNumber},["APPLY_COUPON","APPLY_COUPON_SUCCESS"])},function(ret){footprintsTrace({coupon:couponNumber,error:ret?ret.msg:""},["APPLY_COUPON","APPLY_COUPON_FAILED"])})};eomCartUtils.userCart.incompleteAvatarCheck=function(channel){var uri="/user/incompleteAvatarCheck";uri=getUriWithParam(uri,{partFot:eomCartUtils.userCart.partFot});return callHttp("POST",uri,{channel:channel||eomCartUtils.userCart.channel})};eomCartUtils.userCart.addWithPromotBox=function(){};eomCartUtils.userCart.addWithOutPromotBox=function(){};eomCartUtils.userCart.initPartCheckOutBox=function(){};eomCartUtils.userCart.initPartCheckOutBoxV2=function(){};eomCartUtils.userCart.initMiniCart=function(){};eomCartUtils.userCart.reLoadUpgradeDataForCouponActive=function(){};eomCartUtils.userCart.reLoadBuyNowForCouponActive=function(){};eomCartUtils.userCart.updateFloatingDetailsStatus=function(){};eomCartUtils.userCart.cartUpdatedCallBack=function(){};var createInputAndAppendTo=function createInputAndAppendTo(name,value,form){input=document.createElement("input");input.type="hidden";input.name=name;input.value=value;form.append(input)};var createForm=function createForm(data,returnUrl){var form=document.createElement("Form");form.method="POST";form.action=data.url;createInputAndAppendTo("userId",data.userId,form);createInputAndAppendTo("token",data.token,form);createInputAndAppendTo("anonymous",data.anonymous,form);createInputAndAppendTo("errorUrl",l.UrlUtility.getFullPath("/handlemessage",true),form);createInputAndAppendTo("partsalesTargetUrl",returnUrl,form);return form};var setCookies=function setCookies(cookies){if(!cookies||cookies.length==0){return}var domain=new RegExp(".*((?:[.][^:/]*){2}).*").exec(location.host)[1];for(var i=0;i<cookies.length;i++){var c=cookies[i];var expires=null;if(c.expires){expires=new Date(c.expires)}Cookies.set(c.name,c.value,{domain:domain,path:c.path,expires:expires,sameSite:"None",secure:true,httpOnly:c.httpOnly})}};var handleFlashTestEnv=function handleFlashTestEnv(url){return new Promise(function(resolve){try{var domain=new RegExp(".*//.*((?:[.][^/]*){2}).*").exec(url)[1];var leid=Cookies.get("leid");if(!domain||!leid||location.host.includes(domain)){resolve();return}var xhttp=new XMLHttpRequest;xhttp.withCredentials=true;xhttp.open("GET","https://cross-domain-cookie"+domain+"/us/en/api/v4/eomCart/flash/cookies/set?leid="+encodeURIComponent(leid)+"&domain="+encodeURIComponent(domain),false);xhttp.send();setTimeout(function(){return resolve()},1e3)}catch(e){resolve()}})};eomCartUtils.userCart.checkout=function(channel,email,preCheck){return new Promise(function(resolve,reject){var uri="/user/checkout";uri=getUriWithParam(uri,{partFot:eomCartUtils.userCart.partFot,flashFot:eomCartUtils.userCart.flashFot,flashEnv:eomCartUtils.userCart.flashEnv});var returnUrl=Cookies.get("clickViewPage");callHttp("POST",uri,{channel:channel||eomCartUtils.userCart.channel,returnUrl:returnUrl,email:email,qmReplay:window["QuantumMetricAPI"]?window["QuantumMetricAPI"].getReplay():"",source:eomCartUtils.userCart.source,subSource:eomCartUtils.userCart.subSource,cid:eomCartUtils.userCart.cid,preCheck:preCheck||false}).then(function(data){setCookies(data.cookies);footprintsTrace("",["CHECKOUT","CHECKOUT_SUCCESS"]);var isVantageIframed=(sessionStorage.getItem("skip_shoplogin")==="true"||sessionStorage.getItem("eom_is_iframed")==="true"||l.UrlUtility.getUrlParam("mode").toLowerCase()==="iframemobile"||l.UrlUtility.getUrlParam("mode").toLowerCase()==="iframe")&&(eomCartUtils.userCart.subSource||"").toLowerCase().indexOf("browser")<0;var isOpenToFlashCountry=window.customData&&(window.customData.openBrowerToFlashCountries||"").split(",").includes((l.CultureUtility.getCurrentCountry()||"").toUpperCase());window.openBrowerToFlash=false;if(data.flashCart&&isVantageIframed&&top!=self&&isOpenToFlashCountry){window.openBrowerToFlash=true;callHttp("POST","/savecookies",{url:data.url}).then(function(data){window.open(l.UrlUtility.getFullPath("/cartsummary/redirect?trackid=".concat(data),true),"_blank")}).catch(function(error){window.open(Cookies.get("clickViewPage")||"/","_blank")})}else if(data.flashCart){handleFlashTestEnv(data.url).then(function(){if(!preCheck){var isMobile=mobileRE.test(navigator.userAgent);location.href=isVantageIframed&&!isMobile?getUriWithParam(data.url,{mode:l.UrlUtility.getUrlParam("mode").toLowerCase()==="iframemobile"?"iframemobile":"iframe"}):data.url}})}else{var form=createForm(data,returnUrl||location.href.toString());document.body.append(form);form.submit()}resolve()}).catch(function(ret){footprintsTrace({error:ret?ret.msg:""},["CHECKOUT","CHECKOUT_FAILED"]);reject(ret)})})};eomCartUtils.userCart.flashInit=function(param){var returnUrl=Cookies.get("clickViewPage");param=Object.assign({channel:eomCartUtils.userCart.channel,returnUrl:returnUrl},param);var uri="/user/flashInit";return callHttp("POST",uri,param).then(function(data){footprintsTrace("",["CHECKOUT","CHECKOUT_SUCCESS","FLASH_INIT"]);var isVantageIframed=(sessionStorage.getItem("skip_shoplogin")==="true"||sessionStorage.getItem("eom_is_iframed")==="true")&&(eomCartUtils.userCart.subSource||"").toLowerCase().indexOf("browser")<0;var isMobile=mobileRE.test(navigator.userAgent);location.href=isVantageIframed&&!isMobile?getUriWithParam(data.url,{mode:"iframe"}):data.url}).catch(function(ret){footprintsTrace({error:ret?ret.msg:""},["CHECKOUT","CHECKOUT_FAILED","FLASH_INIT"]);throw ret})};eomCartUtils.orderFlow.auth=function(channel,msdSSOToken){var uri="/orderFlow/auth";return callHttp("POST",uri,{channel:channel,msdSSOToken:msdSSOToken})};eomCartUtils.orderFlow.session=function(channel){var uri="/orderFlow/session";return callHttp("POST",uri,{channel:channel})};eomCartUtils.orderFlow.queryHistoryCount=function(data){var uri="/orderFlow/queryHistoryCount";return callHttp("POST",uri,data)};eomCartUtils.orderFlow.queryHistories=function(data){var uri="/orderFlow/queryHistories";return callHttp("POST",uri,data)};eomCartUtils.orderFlow.sendHistoryEmailAndSMS=function(data){var uri="/orderFlow/sendHistoryEmailAndSMS";return callHttp("POST",uri,data)};eomCartUtils.orderFlow.queryOperator=function(data){var uri="/orderFlow/queryOperator";return callHttp("POST",uri,data)};eomCartUtils.orderFlow.queryCecInfo=function(data){var uri="/orderFlow/queryCecInfo";return callHttp("POST",uri,data)};eomCartUtils.orderFlow.findPosaCountry=function(data){var uri="/orderFlow/findPosaCountry";return callHttp("POST",uri,data)};eomCartUtils.orderFlow.add=function(data){data=Object.assign({qmReplay:window["QuantumMetricAPI"]?window["QuantumMetricAPI"].getReplay():""},data);var fot=l.UrlUtility.getUrlParam("redportfot");var partFot=l.UrlUtility.getUrlParam("partFot");var uri="/orderFlow/add";uri=getUriWithParam(uri,{partFot:partFot,fot:fot});return callHttp("POST",uri,data)};eomCartUtils.orderFlow.addMulti=function(data){data=Object.assign({qmReplay:window["QuantumMetricAPI"]?window["QuantumMetricAPI"].getReplay():""},data);var fot=l.UrlUtility.getUrlParam("redportfot");var partFot=l.UrlUtility.getUrlParam("partFot");var uri="/orderFlow/addMulti";uri=getUriWithParam(uri,{partFot:partFot,fot:fot});return callHttp("POST",uri,data)};eomCartUtils.orderFlow.applyCoupon=function(data){if(data.couponNumber&&!/^[A-Za-z0-9_-]+$/.test(data.couponNumber.trim())){return new Promise(function(resolve,reject){reject({code:-101,msg:{desc:"Only contains letter, digit, '_' and '-'",value:null},data:null})})}var fot=l.UrlUtility.getUrlParam("redportfot");var partFot=l.UrlUtility.getUrlParam("partFot");var uri="/orderFlow/applyCoupon";uri=getUriWithParam(uri,{partFot:partFot,fot:fot});return callHttp("POST",uri,data)};eomCartUtils.orderFlow.submit=function(data){var partFot=l.UrlUtility.getUrlParam("partFot");var uri="/orderFlow/submit";uri=getUriWithParam(uri,{partFot:partFot});var result=callHttp("POST",uri,data);return handleCartData(result)};eomCartUtils.orderFlow.get=function(orderNumber,token){var partFot=l.UrlUtility.getUrlParam("partFot");var uri="/orderFlow/get";uri=getUriWithParam(uri,{partFot:partFot});var result=callHttp("POST",uri,{orderNumber:orderNumber,token:token});return handleCartData(result)};eomCartUtils.orderFlow.reject=function(orderNumber,token,rejectReason){var uri="/orderFlow/reject";var result=callHttp("POST",uri,{orderNumber:orderNumber,token:token,rejectReason:rejectReason});return warpPromise(result,function(){footprintsTrace("",["CHECKOUT_REJECT"])},function(ret){footprintsTrace({error:ret?ret.msg:""},["CHECKOUT_REJECT","CHECKOUT_REJECT_FAILED"])})};eomCartUtils.orderFlow.accept=function(orderNumber,token){var flashfot=l.UrlUtility.getUrlParam("flashfot");var partFot=l.UrlUtility.getUrlParam("partFot");var uri="/orderFlow/accept";uri=getUriWithParam(uri,{partFot:partFot,flashfot:flashfot,flashEnv:eomCartUtils.userCart.flashEnv});var returnUrl=Cookies.get("clickViewPage");return new Promise(function(resolve,reject){callHttp("POST",uri,{orderNumber:orderNumber,token:token,returnUrl:returnUrl,qmReplay:window["QuantumMetricAPI"]?window["QuantumMetricAPI"].getReplay():""}).then(function(data){footprintsTrace("",["CHECKOUT","CHECKOUT_SUCCESS"]);setCookies(data.cookies);if(data.flashCart){handleFlashTestEnv(data.url).then(function(){location.href=data.url})}else{var form=createForm(data,returnUrl||location.href.toString());document.body.append(form);form.submit()}resolve()}).catch(function(ret){footprintsTrace({error:ret?ret.msg:""},["CHECKOUT","CHECKOUT_FAILED"]);reject(ret)})})};eomCartUtils.orderFlow.register=function(data){var uri="/orderFlow/register";return callHttp("POST",uri,data)};var initShopConfigs=function initShopConfigs(country){country=country||l.CultureUtility.getCurrentCountry();var config=window.config?window.config.shopConfigs:undefined;if(config&&config.country&&config.country.toLowerCase()==country.toLowerCase()){return new Promise(function(resolve){resolve()})}return new Promise(function(resolve){httpRequest("GET","/getShopConfigs",{country:country},function(ret){if(ret&&ret.code==0){config=ret.data}else{config=undefined}if(window.config){window.config.shopConfigs=config}else{window.config={shopConfigs:config}}resolve()})})};eomCartUtils.initShopConfigs=initShopConfigs;var initUserCartProperties=function initUserCartProperties(){eomCartUtils.userCart.setProperty("channel",null,"APOS");eomCartUtils.userCart.setProperty("source",l.UrlUtility.getUrlParam("source")||l.UrlUtility.getUrlParam("utm_source"));eomCartUtils.userCart.setProperty("posaId",l.UrlUtility.getUrlParam("posaId"));eomCartUtils.userCart.setProperty("subSource",l.UrlUtility.getUrlParam("subSource"));eomCartUtils.userCart.setProperty("cid",l.UrlUtility.getUrlParam("cid"));eomCartUtils.userCart.setProperty("urlCoupon",l.UrlUtility.getUrlParam("coupon"));eomCartUtils.userCart.setProperty("cartCoupon",l.UrlUtility.getUrlParam("coupon"));eomCartUtils.userCart.setProperty("fot",l.UrlUtility.getUrlParam("redportfot"));eomCartUtils.userCart.setProperty("flashFot",l.UrlUtility.getUrlParam("flashfot"));eomCartUtils.userCart.setProperty("flashEnv",l.UrlUtility.getUrlParam("flashenv"));eomCartUtils.userCart.setProperty("partFot",l.UrlUtility.getUrlParam("partFot"));if(l.UrlUtility.getUrlParamWithoutReplace("lenadata")){eomCartUtils.userCart.setProperty("lenaData",l.UrlUtility.getUrlParamWithoutReplace("lenadata",true))}if(l.UrlUtility.getUrlParamWithoutReplace("callbackVersion")){eomCartUtils.userCart.setProperty("callbackLenaVersion",l.UrlUtility.getUrlParamWithoutReplace("callbackVersion",true))}if(eomCartUtils.userCart.source&&eomCartUtils.userCart.source.toLowerCase()=="posa"||eomCartUtils.userCart.posaId){eomCartUtils.userCart.setProperty("channel","POSA_TAKE_HOME")}eomCartUtils.userCart.setProperty("mls",l.UrlUtility.getUrlParamValue("mls"))};initUserCartProperties();try{Cookies.remove("eSupportShopCart");Cookies.remove("eSupportShopCartRemeberMe")}catch(error){}})(eomCartUtils);window.eomCartUtils=eomCartUtils;